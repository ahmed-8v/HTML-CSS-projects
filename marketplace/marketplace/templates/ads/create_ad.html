{% extends 'base.html' %}

{% block title %}Create Ad - Marketplace{% endblock %}

{% block content %}
<div class="container">
    <div class="form-container">
        <div class="form-header">
            <h1><i class="fas fa-plus"></i> Post New Ad</h1>
            <p>Fill in the details below to create your ad</p>
        </div>

        <form method="post" enctype="multipart/form-data" class="ad-form">
            {% csrf_token %}
            
            <!-- Ad Details -->
            <div class="form-section">
                <h3>Ad Details</h3>
                
                <div class="form-group">
                    <label for="{{ ad_form.title.id_for_label }}">Title:</label>
                    {{ ad_form.title }}
                    {% if ad_form.title.errors %}
                        <div class="form-errors">{{ ad_form.title.errors }}</div>
                    {% endif %}
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="{{ ad_form.category.id_for_label }}">Category:</label>
                        {{ ad_form.category }}
                        {% if ad_form.category.errors %}
                            <div class="form-errors">{{ ad_form.category.errors }}</div>
                        {% endif %}
                    </div>
                    
                    <div class="form-group">
                        <label for="{{ ad_form.condition.id_for_label }}">Condition:</label>
                        {{ ad_form.condition }}
                        {% if ad_form.condition.errors %}
                            <div class="form-errors">{{ ad_form.condition.errors }}</div>
                        {% endif %}
                    </div>
                    
                    <div class="form-group">
                        <label for="{{ ad_form.price.id_for_label }}">Price ($):</label>
                        {{ ad_form.price }}
                        {% if ad_form.price.errors %}
                            <div class="form-errors">{{ ad_form.price.errors }}</div>
                        {% endif %}
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="{{ ad_form.description.id_for_label }}">Description:</label>
                    {{ ad_form.description }}
                    {% if ad_form.description.errors %}
                        <div class="form-errors">{{ ad_form.description.errors }}</div>
                    {% endif %}
                </div>
            </div>

            <!-- Image Upload -->
            <div class="form-section">
                <h3>Images (up to 5)</h3>
                <p class="form-help">Upload clear photos of your item. The first image will be used as the main photo.</p>
                
                {{ image_formset.management_form }}
                <div class="image-formset">
                    {% for form in image_formset %}
                        <div class="image-form-row">
                            <div class="form-group">
                                <label>Image {{ forloop.counter }}:</label>
                                {{ form.image }}
                                {% if form.image.errors %}
                                    <div class="form-errors">{{ form.image.errors }}</div>
                                {% endif %}
                            </div>
                            
                            <div class="form-group">
                                <label for="{{ form.caption.id_for_label }}">Caption (optional):</label>
                                {{ form.caption }}
                                {% if form.caption.errors %}
                                    <div class="form-errors">{{ form.caption.errors }}</div>
                                {% endif %}
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>

            <!-- Form Actions -->
            <div class="form-actions">
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-check"></i> Create Ad
                </button>
                <a href="{% url 'home' %}" class="btn btn-secondary">
                    <i class="fas fa-times"></i> Cancel
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock %}